<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大明AI | MingDynasty</title>
    <link rel="icon" href="https://MingDynasty1.github.io/000000000000000000.png" type="image/png">
    <style>
        /* 基础变量定义 - 亮色/暗色模式 */
        :root {
            /* 明朝主题色 */
            --ming-red: #C41E3A; /* 朱红 */
            --ming-yellow: #FFC107; /* 明黄 */
            --ming-blue: #1A5599; /* 青花蓝 */
            --ming-black: #1A1A1A; /* 墨黑 */
            --ming-white: #F5F0E1; /* 宣纸白 */
            --ming-brown: #8B4513; /* 檀木棕 */
            
            /* 亮色模式 */
            --bg-primary: var(--ming-white);
            --bg-secondary: #FFFFFF;
            --text-primary: var(--ming-black);
            --text-secondary: #5C4033;
            --border-color: var(--ming-brown);
            --scroll-bg: #F9F6ED;
            --scroll-border: var(--ming-red);
            --btn-primary-bg: var(--ming-red);
            --btn-primary-hover: #A0182E;
            --btn-secondary-bg: var(--ming-blue);
            --btn-secondary-hover: #144680;
            --chat-user-bg: #E8F0FE;
            --chat-ai-bg: #FDF5E6;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
            --history-bg: #F0E6D2;
            --history-hover: #E2D4BC;
        }

        [data-theme="dark"] {
            /* 暗色模式 */
            --bg-primary: #121212;
            --bg-secondary: #1E1E1E;
            --text-primary: #F5F0E1;
            --text-secondary: #D4C8B8;
            --border-color: #6D4C41;
            --scroll-bg: #2D2D2D;
            --scroll-border: #D32F2F;
            --btn-primary-bg: #D32F2F;
            --btn-primary-hover: #B71C1C;
            --btn-secondary-bg: #303F9F;
            --btn-secondary-hover: #1A237E;
            --chat-user-bg: #283593;
            --chat-ai-bg: #4A2C2A;
            --shadow: 0 4px 8px rgba(0,0,0,0.3);
            --history-bg: #252525;
            --history-hover: #333333;
        }

        /* 全局重置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "仿宋", "KaiTi", "SimKai", serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: all 0.3s ease;
            min-height: 100vh;
            padding: 20px;
            background-image: 
                radial-gradient(var(--border-color) 1px, transparent 1px),
                radial-gradient(var(--border-color) 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            background-opacity: 0.1;
        }

        /* 容器样式 */
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 2px solid var(--border-color);
            position: relative;
        }

        /* 顶部装饰 - 明朝牌匾风格 */
        .header {
            background: linear-gradient(135deg, var(--ming-red), #8B0000);
            color: var(--ming-yellow);
            padding: 20px;
            text-align: center;
            position: relative;
            border-bottom: 3px solid var(--ming-yellow);
        }

        .header::before, .header::after {
            content: "";
            position: absolute;
            top: 0;
            width: 30px;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FFC107'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
        }

        .header::before {
            left: 10px;
        }

        .header::after {
            right: 10px;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        /* 主题切换按钮 + 历史记录按钮 */
        .theme-toggle, .history-toggle {
            position: absolute;
            top: 20px;
            background-color: var(--bg-secondary);
            border: 2px solid var(--ming-yellow);
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }
        .theme-toggle { right: 20px; }
        .history-toggle { right: 70px; }

        .theme-toggle:hover, .history-toggle:hover {
            background-color: var(--ming-yellow);
            color: var(--ming-black);
        }

        /* 历史对话面板 - 卷轴卷宗样式 */
        .history-panel {
            position: absolute;
            top: 70px;
            right: 20px;
            width: 280px;
            max-height: 400px;
            background-color: var(--history-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 10px;
            overflow-y: auto;
            z-index: 9;
            display: none;
            transition: all 0.3s ease;
        }
        .history-panel.show { display: block; }
        .history-panel h3 {
            text-align: center;
            font-size: 1rem;
            color: var(--ming-red);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        .history-list { list-style: none; }
        .history-item {
            padding: 8px 10px;
            border-radius: 4px;
            margin-bottom: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            background-color: var(--bg-secondary);
            transition: all 0.2s ease;
        }
        .history-item:hover {
            background-color: var(--history-hover);
            transform: translateX(3px);
        }
        .history-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            display: block;
            margin-top: 3px;
        }
        .clear-history {
            width: 100%;
            margin-top: 10px;
            padding: 6px;
            border: 1px solid var(--ming-red);
            background-color: transparent;
            color: var(--ming-red);
            font-size: 0.8rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease;
        }
        .clear-history:hover {
            background-color: var(--ming-red);
            color: white;
        }

        /* 对话区域 - 卷轴样式 */
        .chat-container {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            background-color: var(--scroll-bg);
            position: relative;
        }

        .chat-container::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(to bottom, var(--scroll-border), transparent);
            opacity: 0.5;
        }

        .chat-container::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(to top, var(--scroll-border), transparent);
            opacity: 0.5;
        }

        /* 滚动条样式 */
        .chat-container::-webkit-scrollbar, .history-panel::-webkit-scrollbar {
            width: 8px;
        }
        .chat-container::-webkit-scrollbar-track, .history-panel::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 4px;
        }
        .chat-container::-webkit-scrollbar-thumb, .history-panel::-webkit-scrollbar-thumb {
            background: var(--ming-red);
            border-radius: 4px;
        }

        /* 对话气泡 */
        .chat-message {
            margin-bottom: 15px;
            max-width: 80%;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            margin-left: auto;
            background-color: var(--chat-user-bg);
            border: 1px solid var(--ming-blue);
            border-radius: 15px 15px 0 15px;
            padding: 12px 18px;
        }

        .ai-message {
            margin-right: auto;
            background-color: var(--chat-ai-bg);
            border: 1px solid var(--ming-red);
			border-radius: 15px 15px 15px 0;
            padding: 12px 18px;
            position: relative;
        }

        .ai-message::before {
            content: "AI";
            position: absolute;
            top: -10px;
            left: 10px;
            background-color: var(--ming-red);
            color: white;
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .message-content {
            font-size: 1rem;
            line-height: 1.5;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        /* 思考动画 */
        .thinking {
            display: flex;
            gap: 5px;
            align-items: center;
            padding-left: 10px;
        }

        .thinking-dot {
            width: 8px;
            height: 8px;
            background-color: var(--ming-red);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .thinking-dot:nth-child(1) { animation-delay: -0.32s; }
        .thinking-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* 输入区域 */
        .input-container {
            padding: 20px;
            background-color: var(--bg-secondary);
            border-top: 2px solid var(--border-color);
        }

        .input-wrapper {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        #message-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1rem;
            resize: none;
            height: 60px;
            transition: border-color 0.3s ease;
        }

        #message-input:focus {
            outline: none;
            border-color: var(--ming-red);
        }

        /* 按钮样式 - 明朝官印风格 */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: inherit;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-think {
            background-color: var(--ming-blue);
            color: white;
            height: 60px;
            min-width: 120px;
        }

        .btn-think:hover {
            background-color: var(--btn-secondary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .btn-send {
            background-color: var(--ming-red);
            color: white;
            height: 60px;
            min-width: 80px;
        }

        .btn-send:hover {
            background-color: var(--btn-primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                margin: 0;
                height: 100vh;
                border-radius: 0;
            }
            .history-toggle { right: 60px; }
            .theme-toggle { right: 10px; }
            .history-panel { width: 250px; right: 10px; }
            .chat-container {
                height: calc(100vh - 220px);
            }

            .input-wrapper {
                flex-direction: column;
            }

            #message-input, .btn-think, .btn-send {
                width: 100%;
                height: 50px;
            }

            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
    <!-- 引入图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- 头部区域 -->
        <div class="header">
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="history-toggle" id="history-toggle">
                <i class="fas fa-scroll"></i>
            </button>
            <!-- 历史对话面板 -->
            <div class="history-panel" id="history-panel">
                <h3>典籍卷宗 · 对话录</h3>
                <ul class="history-list" id="history-list"></ul>
                <button class="clear-history" id="clear-history">清空卷宗</button>
            </div>
            <h1>大明文渊阁</h1>
            <p>智能问答 | 明鉴古今</p>
        </div>

        <!-- 对话区域 -->
        <div class="chat-container" id="chat-container">
            <!-- 欢迎消息 -->
            <div class="chat-message ai-message">
                <div class="message-content">
                    客官安好！吾乃大明文渊阁侍读，通晓本朝典章制度、历史典故、诗词文赋。有何垂询，尽管道来。
                </div>
                <div class="message-time">
                    <i class="fas fa-clock"></i> 刚刚
                </div>
            </div>
        </div>

        <!-- 输入区域 -->
        <div class="input-container">
            <div class="input-wrapper">
                <textarea id="message-input" placeholder="请输入您的问题（如：明朝开国皇帝是谁？）..." autofocus></textarea>
                <button class="btn btn-think" id="think-btn">
                    <i class="fas fa-brain"></i> 深度思考
                </button>
                <button class="btn btn-send" id="send-btn">
                    <i class="fas fa-paper-plane"></i> 奏上
                </button>
            </div>
        </div>
    </div>

    <script>
        // 全局变量
        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        const sendBtn = document.getElementById('send-btn');
        const thinkBtn = document.getElementById('think-btn');
        const themeToggle = document.getElementById('theme-toggle');
        const historyToggle = document.getElementById('history-toggle');
        const historyPanel = document.getElementById('history-panel');
        const historyList = document.getElementById('history-list');
        const clearHistoryBtn = document.getElementById('clear-history');
        // 历史对话存储key
        const HISTORY_KEY = 'ming_chat_history';
        
        // ========== 【完整版200条】明朝知识库 answerLibrary ==========
        const answerLibrary = {
            // ===== 一、基础正史（1-15）
            "明朝开国皇帝是谁": "明朝的开国皇帝是朱元璋，年号洪武，史称明太祖。他于1368年在应天（今南京）称帝，建立大明王朝，结束了元朝的统治。",
            "明朝有多少位皇帝": "明朝共有16位皇帝，自明太祖朱元璋至明思宗朱由检（崇祯帝），享国276年（1368-1644年）。其中明英宗朱祁镇曾两度登基，年号分别为正统和天顺。",
            "明朝灭亡时间": "明朝于1644年灭亡，李自成率领的农民起义军攻入北京，崇祯帝自缢于煤山（今景山），标志着大明正统覆灭。南明政权延续至1662年永历帝被俘，1683年台湾明郑政权灭亡，明祚方尽。",
            "明朝首都在哪里": "明朝初都应天府（今南京），明成祖朱棣永乐十九年（1421年）迁都顺天府（今北京），南京仍为留都，设六部等全套机构，形成大明两京制度。",
            "明朝疆域最大时多大": "大明疆域极盛于永乐年间，东至朝鲜半岛，西达吐蕃乌斯藏，南抵安南（今越南），北拒蒙古大漠，总面积约997万平方公里，为东亚第一大国。",
            "明朝享国多少年": "大明自洪武元年（1368）太祖开国，至崇祯十七年（1644）北京陷落，正统享国276年；算上南明诸帝，至永历十六年（1662）共294年。",
            "明成祖是谁": "明成祖朱棣，朱元璋第四子，初封燕王，发动靖难之役登基，年号永乐，史称永乐大帝。其在位期间迁都北京、修永乐大典、派郑和下西洋，功绩卓著。",
            "建文帝下落": "建文四年（1402）朱棣破南京，建文帝朱允炆宫中起火，正史记载其焚亡，野史则有剃发为僧、流亡南洋、遁入云贵等说法，终成大明第一悬案。",
            "明武宗朱厚照": "明武宗朱厚照，年号正德，性好动、尚武，自封总督军务威武大将军总兵官，建豹房、巡边镇、平宁王之乱，虽行事荒诞却有军事之才，在位16年无子嗣。",
            "嘉靖帝在位多少年": "明世宗朱厚熜，年号嘉靖，在位45年，前期励精图治开创嘉靖中兴，后期崇道修仙、怠政二十年，壬寅宫变险被宫女缢杀，晚年沉迷丹药终致病逝。",
            "隆庆帝朱载坖": "明穆宗朱载坖，年号隆庆，在位6年，为人宽厚，废除海禁行隆庆开关、与蒙古俺答汗封贡互市，史称隆庆新政，为万历中兴奠定基础，英年早逝年仅36岁。",
            "明光宗朱常洛": "明光宗朱常洛，年号泰昌，苦熬39年登帝位，在位仅29天，因红丸案暴毙，史称一月天子，其死因成谜，为明末三大案之一。",
            "明熹宗朱由校": "明熹宗朱由校，年号天启，善木工、不理朝政，宠信魏忠贤与客氏，东林党与阉党争斗白热化，辽东战局崩坏，在位7年落水病重而亡，年仅23岁。",
            "崇祯帝谥号": "明思宗朱由检，崇祯帝殉国后，南明谥其为绍天绎道刚明恪俭揆文奋武敦仁懋孝烈皇帝，庙号思宗；清朝谥其为庄烈愍皇帝，后世多称崇祯帝。",
            "明朝最后一位皇帝": "正统大明最后一位皇帝为崇祯帝朱由检；南明最后一位皇帝为永历帝朱由榔，1662年被吴三桂擒杀于缅甸，大明宗室血脉自此断绝。",

            // ===== 二、重大事件（16-45）
            "靖难之役": "靖难之役发生于建文元年至四年（1399-1402年），燕王朱棣以“清君侧、靖国难”为名起兵，历时四年攻破南京，建文帝失踪，朱棣登基为明成祖，是明朝唯一一次藩王夺位成功。",
            "土木堡之变": "正统十四年（1449年），明英宗朱祁镇在王振怂恿下亲征瓦剌，大军行至土木堡（今河北怀来）被围，明军精锐全军覆没，皇帝被俘，史称土木堡之变，为大明由盛转衰的分水岭。",
            "北京保卫战": "土木堡之变后瓦剌大军围北京，兵部尚书于谦拥立景泰帝，调兵勤王、列阵九门，亲自督战击退瓦剌，保全大明社稷，此战之后瓦剌势力渐衰，北方边境暂安。",
            "夺门之变": "景泰八年（1457），石亨、徐有贞等拥被俘归国的太上皇朱祁镇复辟，废景泰帝为郕王，诛杀于谦等功臣，史称夺门之变，英宗重登帝位改元天顺。",
            "壬寅宫变": "嘉靖二十一年（1542年），杨金英等十数名宫女不堪嘉靖帝暴虐，趁夜潜入乾清宫欲勒死皇帝，事败后全员凌迟处死，嘉靖帝自此移居西苑，不复临朝理政。",
            "庚戌之变": "嘉靖二十九年（1550），蒙古俺答汗率大军攻破古北口，兵临北京城下，严嵩严令守军不许出战，俺答汗纵兵劫掠八日而去，大明颜面尽失，暴露军备废弛之弊。",
            "万历三大征": "万历年间（1592-1600），大明先后出兵平定宁夏哱拜叛乱、援朝抗倭、平定播州杨应龙叛乱，三役皆胜却耗银超八百万两，掏空国库，为明末财政危机埋下伏笔。",
            "宁夏之役": "万历二十年（1592），宁夏副总兵哱拜起兵反叛，巡抚魏学曾平叛失利，朝廷命李如松率军出征，数月平定叛乱，哱拜自焚而死，西北边陲复安。",
            "朝鲜之役": "万历二十至二十六年（1592-1598），日本丰臣秀吉两次侵朝，大明出兵十余万援朝，血战七年最终击败日军，露梁海战中邓子龙、李舜臣战死，此战保全朝鲜亦耗竭大明国力。",
            "播州之役": "万历二十八年（1600），四川播州土司杨应龙反叛，朝廷调集川黔湖广三省大军二十万，由李化龙统领平叛，攻破海龙囤，杨应龙自缢，播州改土归流，西南土司割据终结。",
            "萨尔浒之战": "万历四十七年（1619），大明调集11万大军分四路攻后金，努尔哈赤以“凭你几路来，我只一路去”的战术，五日之内连破三路明军，大明精锐尽失，辽东自此无险可守。",
            "松锦大战": "崇祯十二至十五年（1639-1642），大明与后金在松山、锦州决战，洪承畴率十三万大军驰援，因指挥失当被俘降清，祖大寿献锦州投降，大明关外防线彻底崩溃。",
            "李自成起义": "李自成，陕西米脂人，号闯王，崇祯二年起兵反明，提出“均田免赋”口号，崇祯十七年（1644）攻破北京，崇祯帝自缢，大顺政权建立，后败于清军与吴三桂联军。",
            "张献忠起义": "张献忠，陕西定边人，与李自成齐名，转战川楚豫，崇祯十七年（1644）攻破成都建立大西政权，称帝改元大顺，后与清军交战中箭身亡，余部联明抗清十余年。",
            "山海关之战": "崇祯十七年（1644），李自成率大顺军攻山海关，吴三桂降清引多尔衮入关，两军合击大败大顺军，李自成退守北京后西撤，清军自此入主中原，大明复国无望。",
            "郑和下西洋几次": "郑和率领船队七次下西洋，首次始于永乐三年（1405），末次结束于宣德八年（1433），远航至印度洋、阿拉伯半岛、东非索马里，船队规模达200余舰、27000余人。",
            "郑和下西洋的意义": "郑和七下西洋，扬大明国威于海外，开辟海上丝绸之路，促进中外朝贡贸易与文化交流，最远抵达非洲东海岸，是中国古代规模最大、航程最远的远洋航行。",
            "隆庆开关": "隆庆元年（1567），明穆宗下诏开放福建漳州月港，允许民间出海通商，史称隆庆开关，此举使大明海外贸易激增，白银大量流入，年关税超百万两，缓解财政危机。",
            "张居正改革": "万历初年，内阁首辅张居正推行考成法、一条鞭法、清丈土地、整顿吏治、加强边防，史称万历新政，使大明国库充盈、吏治清明、边防稳固，开创万历中兴之局。",
            "国本之争": "万历朝立储之争，万历帝欲立郑贵妃之子福王朱常洵，朝臣坚持立长子朱常洛，双方僵持十五年，万历帝赌气三十年不上朝，朝政荒废，党争四起，为明末乱局之始。",
            "明末三大案": "指梃击案、红丸案、移宫案，均发生于万历至天启年间，皆围绕皇位继承展开，牵扯东林党与阉党势力，案件真相扑朔迷离，动摇大明国本，加速王朝覆灭。",
            "梃击案": "万历四十三年（1615），张差持木棍闯入太子朱常洛居所慈庆宫伤人，直指郑贵妃谋害太子，万历帝息事宁人草草结案，太子地位自此稳固，却埋下党争隐患。",
            "红丸案": "泰昌元年（1620），明光宗朱常洛登基后病重，服用鸿胪寺丞李可灼进献的红丸后暴毙，朝野震动，此案牵连甚广，最终不了了之，成为千古谜案。",
            "移宫案": "泰昌帝驾崩后，李选侍挟持太子朱由校居乾清宫欲把持朝政，东林党人杨涟、左光斗等强拥太子迁出，拥立天启帝登基，李选侍被逐，东林党自此掌权。",
            "东林党": "明末以江南士大夫为主的政治集团，标榜清流、反对阉党，代表人物顾宪成、高攀龙、杨涟、左光斗，讲学于东林书院，主张改良朝政、体恤民生，后被魏忠贤残酷镇压。",
            "阉党": "明末依附于宦官的官僚集团，以魏忠贤为首，结党营私、残害忠良、搜刮民财，把持朝政数年，崇祯帝登基后肃清阉党，但其造成的朝政崩坏已无法挽回。",
            "东林党争": "明末东林党与齐、楚、浙三党及阉党的长期争斗，始于万历、盛于天启、终于崇祯，党争之下朝政混乱、边防废弛、民生凋敝，是大明灭亡的重要内因。",
            "白莲教起义": "明末白莲教在川楚陕等地多次起义，以“反清复明”为口号，教徒遍布民间，虽屡被镇压却愈演愈烈，极大消耗大明军力财力，成为明末农民起义的先驱。",

            // ===== 三、典章制度（46-70）
            "明朝内阁制度": "内阁始于永乐年间，初为皇帝秘书机构，洪熙年间掌票拟权，嘉靖万历时期张居正任首辅时权力达顶峰，可总揽朝政，却始终无决策权，皇权至上，是君主专制强化的产物。",
            "明朝六部制度": "大明设吏、户、礼、兵、刑、工六部，直属于皇帝，六部尚书为正二品大员，分掌全国政务：吏部管人事、户部管财政、礼部管礼仪科举、兵部管军事、刑部管司法、工部管工程。",
            "明朝厂卫制度": "厂卫为大明特务机构，含锦衣卫、东厂、西厂、内行厂。锦衣卫掌缉捕审讯，东厂由宦官统领监察百官，西厂成化年间设后废，内行厂刘瑾掌权时设，厂卫直接对皇帝负责，酷烈至极。",
            "锦衣卫": "洪武十五年（1382）朱元璋设锦衣卫，掌侍卫、缉捕、刑狱，下设南北镇抚司，可不经刑部直接审讯，诏狱酷刑闻名，洪武末年曾废，永乐朝复设并由宦官制衡。",
            "东厂": "永乐十八年（1420）朱棣设东厂，由司礼监秉笔太监统领，权力在锦衣卫之上，可监察锦衣卫，东厂番子遍布天下，百官言行皆在监视之中，为明朝宦官专权之始。",
            "西厂": "成化十三年（1477）明宪宗设西厂，由汪直统领，权力远超东厂，侦缉范围至全国，办案酷烈，民怨沸腾，后因群臣反对两立两废，正德年间彻底裁撤。",
            "明朝科举制度": "大明科举分童生试、乡试、会试、殿试四级，乡试中者为举人、会试中者为贡士、殿试中者为进士，考试内容以四书五经为纲、八股文为体，取士标准僵化却为寒门开晋升之路。",
            "八股取士": "成化年间大明科举定型八股文，文章分破题、承题、起讲、入手、起股、中股、后股、束股八部分，格式固定、内容限朱熹注疏，禁锢思想却保证科举公平，沿用至清末。",
            "明朝官阶品级": "大明官制分九品十八阶，正一品如太师、太傅，从一品如少师、太子太师，正二品如六部尚书，从二品如布政使，九品之下为未入流，官员品级决定俸禄与服饰。",
            "明朝言官制度": "大明设六科给事中与都察院御史，合称言官，品阶不高却可监察百官、弹劾权贵、封驳圣旨，直言敢谏者辈出，海瑞、杨涟皆为言官典范，是明朝监察体系的核心。",
            "一条鞭法": "张居正万历九年（1581）推行，将田赋、徭役、杂税合并为一条，按田亩折算白银缴纳，简化税制、减轻民负、促进商品经济，是中国古代赋役制度的重大变革，沿用至清朝。",
            "考成法": "张居正改革核心制度之一，立考成簿记录官吏政绩，层层考核、赏罚分明，实现“立限考事、以事责人”，大幅提升行政效率，裁汰庸官冗员，使大明吏治焕然一新。",
            "鱼鳞图册": "洪武年间朱元璋颁行，为全国土地清丈档案，绘土地形状、标注面积、户主姓名，作为征收田赋的依据，是中国古代最完备的土地登记制度，有效遏制土地兼并。",
            "黄册制度": "大明户籍档案，十年一造，记录每户人口、田产、赋税，藏于南京后湖黄册库，是户籍管理与赋役征收的核心依据，中后期因吏治腐败逐渐废弛。",
            "卫所制度": "大明军事制度，朱元璋设卫、所两级驻军，卫有五千六百人，所有一千一百二十人，军户世袭、屯田自给，寓兵于农，永乐年间卫所超四百，兵力达两百万，后期屯田被占渐趋瓦解。",
            "土司制度": "大明在西南少数民族地区设土司，世袭统治、自治一方，朝廷仅掌册封与朝贡，土司叛乱频发，万历播州之役后逐步改土归流，将土司辖区纳入中央直管，加强边疆统治。",
            "改土归流": "废除西南少数民族世袭土司，设流官治理，始于永乐年间，盛于万历、雍正朝，打破土司割据，加强中央集权，促进民族融合，是大明边疆治理的重要成就。",
            "明朝宦官制度": "大明设十二监、四司、八局共二十四衙门，司礼监为宦官之首，掌秉笔、掌印太监可代皇帝批红，王振、刘瑾、魏忠贤皆为司礼监太监，宦官专权为明朝一大弊病。",
            "廷杖制度": "大明皇帝对朝臣的体罚，在午门杖责直言触怒皇帝的官员，轻者血肉模糊，重者当场毙命，洪武至崇祯年间廷杖数百次，是君主专制极端化的体现，寒天下士子之心。",
            "宗藩制度": "朱元璋封诸子为藩王，镇守各地，有兵权、财权，朱棣靖难后削藩，藩王无兵权、不得出封地、不得任官，仅食俸禄，宗室子孙繁衍至百万之众，耗空国库，为明末财政大患。",
            "三司制度": "明初在各省设承宣布政使司（民政）、提刑按察使司（司法）、都指挥使司（军事），三司分立、互不统属，皆直属于中央，有效防止地方割据，加强中央集权。",
            "巡抚制度": "宣德年间始设，为中央派往地方的军政长官，总揽一省民政、军事、司法，三司沦为下属，巡抚逐渐成为常设官职，清朝沿用并设总督，成为地方最高行政长官。",
            "总督制度": "明朝中后期设，统辖数省军政，如蓟辽总督、三边总督、两广总督，品级高于巡抚，战时掌军权、平时掌行政，是应对边疆危机与农民起义的临时建制，清朝定型为常设官。",
            "大明律": "洪武三十年（1397）朱元璋颁行，共30卷460条，体例严谨、量刑严苛，重典治吏、体恤民生，是中国古代法典的集大成之作，沿用至清朝，为明清两代律法基础。",
            "大诰": "朱元璋编订的普法典籍，收录严刑峻法案例，每户一册，科举必考，以严刑震慑贪官污吏与不法之民，洪武年间大诰风行天下，是大明重典治国的核心文献。",

            // ===== 四、名臣武将（71-100）
            "张居正": "张居正（1525-1582），字叔大，号太岳，湖北江陵人，万历朝内阁首辅十年，推行一条鞭法、考成法，整顿吏治、加强边防，开创万历中兴，死后被抄家，改革成果尽废，为大明续命百年。",
            "海瑞": "海瑞（1514-1587），字汝贤，号刚峰，海南琼山人，一生清正廉洁、直言敢谏，抬棺上疏骂嘉靖帝，被贬入狱，任应天巡抚时疏浚吴淞江、推行一条鞭法，百姓称海青天，千古流芳。",
            "戚继光": "戚继光（1528-1588），字元敬，号南塘，山东登州人，抗倭名将，创鸳鸯阵、练戚家军，扫平东南倭患，镇守蓟镇十六年，蒙古不敢犯边，著《纪效新书》《练兵实纪》，为一代兵圣。",
            "俞大猷": "俞大猷（1503-1579），字志辅，号虚江，福建晋江人，抗倭名将，与戚继光并称俞龙戚虎，率俞家军转战东南，剿灭倭寇数万，精通兵法，著《正气堂集》，战功赫赫却屡遭贬谪。",
            "袁崇焕": "袁崇焕（1584-1630），字元素，广东东莞人，明末辽东名将，守宁远、锦州，取得宁远大捷击毙努尔哈赤、宁锦大捷败皇太极，后崇祯中反间计，袁崇焕被凌迟处死，辽东防线崩溃。",
            "于谦": "于谦（1398-1457），字廷益，号节庵，浙江钱塘人，兵部尚书，北京保卫战核心功臣，力挽狂澜保全大明，英宗复辟后被冤杀，抄家时家无余财，其《石灰吟》为千古绝唱，谥号忠肃。",
            "孙承宗": "孙承宗（1563-1638），字稚绳，河北高阳人，明末辽东督师，筑关宁锦防线、练关宁铁骑，收复失地四百余里，后辞官归乡，清军破高阳时率全家殉国，年76岁，谥号文忠。",
            "熊廷弼": "熊廷弼（1569-1625），字飞百，湖北江夏人，明末辽东经略，治军严明、守辽有功，因党争被罢官，萨尔浒之败后复任，却遭阉党诬陷，被斩于西市，传首九边，辽东自此无宁日。",
            "孙传庭": "孙传庭（1593-1643），字伯雅，山西代州人，明末名将，镇压李自成、张献忠起义，俘高迎祥、败李自成，因崇祯猜忌被下狱，出狱后战死潼关，明史有言“传庭死，而明亡矣”。",
            "卢象升": "卢象升（1600-1639），字建斗，江苏宜兴人，明末名将，号卢阎王，治军严明、勇猛善战，镇压农民起义、抗击清军，因杨嗣昌掣肘，孤军战死巨鹿，年39岁，谥号忠烈。",
            "洪承畴": "洪承畴（1593-1665），字彦演，福建南安人，明末蓟辽总督，松锦大战被俘降清，为清军入关献策，平定江南，官至太子太保，虽为清朝功臣却被大明视为贰臣，争议千古。",
            "吴三桂": "吴三桂（1612-1678），字长伯，辽宁铁岭人，明末辽东总兵，镇守山海关，李自成破北京后降清引清兵入关，封平西王，镇守云南，康熙年间起兵反清，称帝建周，兵败病逝。",
            "郑成功": "郑成功（1624-1662），字明俨，福建南安人，明末抗清名将，奉南明永历帝，率水师转战东南，1661年渡海收复台湾，驱逐荷兰殖民者，次年病逝，为民族英雄，谥号延平郡王。",
            "胡宗宪": "胡宗宪（1512-1565），字汝贞，安徽绩溪人，浙直总督，重用戚继光、俞大猷，统筹东南抗倭，剿灭倭寇主力，后因严嵩案牵连入狱，自尽而亡，平反后谥号襄懋。",
            "李成梁": "李成梁（1526-1615），字汝契，辽宁铁岭人，辽东总兵，镇守辽东三十年，大败蒙古、女真各部，封宁远伯，却纵容努尔哈赤崛起，为后金坐大埋下隐患，功过参半。",
            "李文忠": "李文忠（1339-1384），字思本，江苏盱眙人，朱元璋外甥，开国功臣，骁勇善战，平定江南、北伐蒙古，封曹国公，位列开国六公爵，病逝后追封岐阳王。",
            "徐达": "徐达（1332-1385），字天德，安徽凤阳人，大明开国第一功臣，率军北伐灭元、平定北方，封魏国公，一生谨慎低调，善终而逝，追封中山王，谥号武宁。",
            "常遇春": "常遇春（1330-1369），字伯仁，安徽怀远人，开国功臣，勇冠三军，号常十万，随徐达北伐，攻克元大都，暴毙军中，追封开平王，谥号忠武，为大明第一猛将。",
            "刘伯温": "刘基（1311-1375），字伯温，浙江青田人，开国谋臣，通经史、晓天文、精兵法，辅佐朱元璋定天下，封诚意伯，后被胡惟庸毒害，追赠太师，谥号文成，民间称其为神算。",
            "李善长": "李善长（1314-1390），字百室，安徽定远人，开国功臣，为朱元璋掌后勤、定制度，封韩国公，位列开国六公爵之首，后因胡惟庸案牵连，满门抄斩，年77岁。",
            "方孝孺": "方孝孺（1357-1402），字希直，浙江宁海人，建文帝恩师，建文朝翰林学士，朱棣登基后拒写诏书，被诛十族（九族加门生），共杀873人，为大明第一忠臣，谥号文正。",
            "杨士奇": "杨士奇（1365-1444），字士奇，江西泰和人，内阁首辅，历仕五朝，与杨荣、杨溥并称三杨，开创仁宣之治，为人宽厚、善识人，晚年因子获罪郁郁而终，谥号文贞。",
            "杨荣": "杨荣（1371-1440），字勉仁，福建建安人，内阁重臣，三杨之一，多谋善断、精通边防，随朱棣北征五次，定迁都北京之策，谥号文敏，为仁宣之治核心功臣。",
            "杨溥": "杨溥（1372-1446），字弘济，湖北石首人，内阁重臣，三杨之一，曾因太子案入狱十年，出狱后身居高位却清廉自守，辅佐宣宗、英宗，谥号文定，三杨辅政为大明盛世巅峰。",
            "王振": "明朝第一代专权宦官，英宗心腹，掌司礼监，怂恿英宗亲征瓦剌致土木堡之变，明军大败，王振被护卫将军樊忠锤杀，为明朝宦官专权的始作俑者。",
            "刘瑾": "明武宗朝宦官，掌司礼监，专权五年，结党营私、搜刮民财，被称为立皇帝，武宗下旨凌迟处死，行刑三日，百姓争食其肉，为明朝最贪腐的宦官之一。",
            "魏忠贤": "明熹宗朝宦官，掌司礼监，号九千岁，结阉党、害东林党，专权七年，朝政黑暗，崇祯帝登基后将其贬谪凤阳，途中自缢，阉党覆灭，但其造成的恶果已无法挽回。",
            "杨涟": "杨涟（1572-1625），字文孺，湖北应山人，东林党领袖，弹劾魏忠贤二十四大罪，被诬陷下狱，受尽酷刑惨死狱中，谥号忠烈，为东林党楷模，千古流芳。",
            "左光斗": "左光斗（1575-1625），字遗直，安徽桐城人，东林党重臣，与杨涟并称杨左，举荐史可法，弹劾魏忠贤，被下狱折磨致死，谥号忠毅，其忠义事迹传为佳话。",
            "史可法": "史可法（1601-1645），字宪之，河南祥符人，南明督师，镇守扬州，清军南下时拒降，率军民死守扬州，城破后殉国，清军屠城十日，史称扬州十日，谥号忠靖，为南明第一忠臣。",
            "马士英": "马士英（1591-1646），字瑶草，贵州贵阳人，南明弘光朝内阁首辅，结党营私、排挤史可法，朝政腐败，清军破南京后降清，后被处死，为南明奸臣代表。",
            "钱谦益": "钱谦益（1582-1664），字受之，江苏常熟人，明末文坛领袖，南明礼部尚书，清军破南京后剃发降清，官至礼部侍郎，晚年暗中反清，其降清之举备受诟病，为明末文坛争议人物。",
            "陈子龙": "陈子龙（1608-1647），字卧子，上海松江人，明末文学家、抗清志士，南明兵部尚书，组织义军抗清，兵败被俘后投水自尽，年40岁，其诗词悲壮慷慨，为明末文坛翘楚。",
            "黄道周": "黄道周（1585-1646），字幼玄，福建漳浦人，明末大儒、抗清志士，南明礼部尚书，率军北伐抗清，兵败被俘，拒降清军，从容就义，其书法、理学造诣极高，谥号忠烈。",
            "瞿式耜": "瞿式耜（1590-1650），字起田，江苏常熟人，南明桂王政权大学士，镇守桂林，清军破城后拒降，从容就义，谥号文忠，与张同敞并称桂林二忠，为南明忠臣典范。",
            "张煌言": "张煌言（1620-1664），字玄著，浙江鄞县人，南明抗清名将，与郑成功联兵北伐，兵败后隐居海岛，被俘后拒降，从容就义，谥号忠烈，其诗文慷慨激昂，为明末抗清绝唱。",
            "海瑞罢官": "海瑞任应天巡抚时，严惩贪官、疏浚河道、勒令乡官退田，得罪权贵被罢官，百姓罢市哭送，海瑞罢官成为大明清官与权贵斗争的象征，后世传为佳话。",
            "戚继光鸳鸯阵": "戚继光为抗倭创制的阵法，由十二人组成，持狼筅、长枪、短刀、藤牌，攻防兼备、灵活多变，专门克制倭寇的单兵作战，戚家军凭此阵法百战百胜，扫平东南倭患。",

            // ===== 五、文化科技（101-140）
            "王阳明": "王守仁（1472-1529），字伯安，号阳明，浙江余姚人，心学集大成者，主张心即理、知行合一、致良知，平定宁王朱宸濠叛乱，讲学授徒形成阳明学派，其思想影响东亚数百年。",
            "阳明心学": "王阳明创立的儒学流派，核心为心即理、知行合一、致良知，认为天理在人心之中，不必外求，强调实践与良知的统一，是宋明理学的重要分支，影响明清哲学、教育、军事。",
            "徐霞客": "徐霞客（1587-1641），名弘祖，字振之，江苏江阴人，明代地理学家，历时30年游历全国，著《徐霞客游记》，详细记录山川地貌、水文地质、民俗风情，为中国地理学名著。",
            "李时珍": "李时珍（1518-1593），字东璧，湖北蕲春人，明代医药学家，历时27年编撰《本草纲目》，收录药物1892种、药方11096个，纠正历代药书谬误，为中国古代药学集大成之作。",
            "徐光启": "徐光启（1562-1633），字子先，上海松江人，明末科学家，与利玛窦合译《几何原本》，编撰《农政全书》，引入西方历法、火器、水利技术，为中西文化交流先驱，官至礼部尚书。",
            "宋应星": "宋应星（1587-约1666），字长庚，江西奉新人，明末科学家，著《天工开物》，详细记载农业、手工业生产技术，涵盖冶铸、纺织、造纸、陶瓷、火药等，被誉为中国17世纪工艺百科全书。",
            "朱载堉": "朱载堉（1536-1611），明宗室，字伯勤，河南怀庆人，明代音律学家、数学家，首创十二平均律，解决音律学千年难题，其成果被西方誉为音乐史上的里程碑，著《乐律全书》。",
            "徐霞客游记": "徐霞客毕生游历所著，共60万字，记录中国19省的山川、河流、溶洞、温泉、动植物，首次详细描述西南喀斯特地貌，是中国地理学第一部实地考察著作，兼具文学与科学价值。",
            "本草纲目": "李时珍编撰的药学巨著，共52卷，分16部60类，收录药物1892种，附图1109幅，药方11096个，总结中国古代药学成就，流传至世界各国，被译为多种文字。",
            "农政全书": "徐光启编撰的农业百科全书，共60卷，分农本、田制、农事、水利、农器、树艺等12门，收录历代农业典籍，引入西方水利技术，是中国古代农业科学的集大成之作。",
            "天工开物": "宋应星著，共18卷，记录明末农业、手工业的生产工艺，从稻谷种植到丝绸纺织，从青铜冶铸到火药制作，图文并茂，是中国古代科技的珍贵文献，清初被列为禁书。",
            "永乐大典编撰于何时": "《永乐大典》编撰于永乐元年至六年（1403-1408），解缙、姚广孝主持，收录古今图书七八千种，共22877卷、11095册，为中国古代最大类书，现存残卷不足原书4%。",
            "永乐大典的价值": "《永乐大典》汇百家之书、一字不改，保存大量宋元失传典籍，是中国古代文化的集大成之作，其编纂规模为世界之最，可惜屡遭战火焚毁，现存残卷为稀世国宝。",
            "四库全书与永乐大典区别": "《永乐大典》为明成祖编，收录原文不改一字，共11095册；《四库全书》为清乾隆编，删减篡改原文，共79337卷，大典重收录、四库重整理，大典的文献价值远高于四库。",
            "明朝四大奇书": "明代四大奇书为《三国演义》（罗贯中）、《水浒传》（施耐庵）、《西游记》（吴承恩）、《金瓶梅》（兰陵笑笑生），代表明代长篇小说最高成就，影响后世文学至深。",
            "三国演义作者": "《三国演义》作者罗贯中，元末明初小说家，名本，字贯中，号湖海散人，其书以三国历史为蓝本，七分实三分虚，是中国第一部长篇章回体历史演义小说。",
            "水浒传作者": "《水浒传》作者施耐庵，元末明初小说家，名耳，字肇瑞，号子安，其书描写梁山好汉起义，揭露社会黑暗，是中国第一部以农民起义为题材的长篇章回体小说。",
            "西游记作者": "《西游记》作者吴承恩，明代小说家，字汝忠，号射阳山人，江苏淮安人，其书以唐僧取经为蓝本，塑造孙悟空等经典形象，是中国第一部神魔长篇章回体小说。",
            "金瓶梅作者": "《金瓶梅》作者兰陵笑笑生，真实姓名不详，成书于万历年间，以西门庆为主角，描写明代市井生活，是中国第一部文人独立创作的长篇章回体小说，被誉为世情小说鼻祖。",
            "三言二拍": "明代白话短篇小说集，三言为冯梦龙《喻世明言》《警世通言》《醒世恒言》，二拍为凌濛初《初刻拍案惊奇》《二刻拍案惊奇》，收录市井故事，反映明代社会百态，是白话小说的典范。",
            "冯梦龙": "冯梦龙（1574-1646），字犹龙，号墨憨斋主人，江苏苏州人，明代文学家，编撰三言、《东周列国志》，整理戏曲、民歌，其作品贴近民间，为明代白话文学的代表人物。",
            "凌濛初": "凌濛初（1580-1644），字玄房，号初成，浙江湖州人，明代文学家，编撰二拍，其作品题材新颖、语言生动，反映明代市民阶层的生活与思想，与冯梦龙并称明代白话小说双璧。",
            "明朝书法名家": "明代书法分台阁体与晚明四家，台阁体为科举标准楷书，工整刻板；晚明四家为董其昌、张瑞图、米万钟、邢侗，董其昌书法飘逸空灵，为明代书法第一人。",
            "董其昌": "董其昌（1555-1636），字玄宰，号思白，上海松江人，明代书画家，书法兼融晋唐、自成一家，绘画倡南北宗论，影响明清书画四百年，官至礼部尚书，谥号文敏。",
            "明朝绘画流派": "明代绘画流派纷呈，浙派以戴进、吴伟为代表，画风豪放；吴门画派以沈周、文徵明、唐寅、仇英为代表，合称吴门四家，画风清雅，为明代绘画主流；松江派以董其昌为代表，倡文人画。",
            "唐伯虎": "唐寅（1470-1524），字伯虎，号六如居士，江苏苏州人，吴门四家之一，诗书画三绝，科举舞弊案后归隐山林，其画作潇洒飘逸，诗词豪放不羁，为明代才子典范。",
            "文徵明": "文徵明（1470-1559），字徵明，号衡山居士，江苏苏州人，吴门四家之一，诗书画皆精，楷书温润秀劲，画作清雅脱俗，享年90岁，为吴门画派核心人物。",
            "沈周": "沈周（1427-1509），字启南，号石田，江苏苏州人，吴门画派创始人，画风沉稳厚重，兼工诗文书画，为文徵明、唐伯虎恩师，其画作影响明代绘画百年。",
            "仇英": "仇英（约1498-1552），字实父，号十洲，江苏太仓人，吴门四家之一，出身寒门，工青绿山水、人物仕女，画作精工细作、色彩艳丽，为明代院体画代表人物。",
            "明朝戏曲": "明代戏曲鼎盛，传奇取代杂剧成为主流，汤显祖《牡丹亭》、洪昇《长生殿》、孔尚任《桃花扇》为明代三大传奇，汤显祖被誉为东方莎士比亚，其作品情真意切、反抗礼教。",
            "牡丹亭作者": "《牡丹亭》作者汤显祖（1550-1616），字义仍，号海若，江西临川人，明代戏曲家，其作品《临川四梦》（牡丹亭、紫钗记、邯郸记、南柯记）为明代戏曲巅峰，反抗封建礼教、歌颂爱情自由。",
            "明朝科举考试内容": "大明科举以四书五经为核心，乡试、会试考三场，第一场四书义三道、五经义四道，第二场论一道、诏诰表内科一道、判五道，第三场经史时务策五道，殿试仅考时务策一道。",
            "明朝书院": "明代书院盛行，东林书院、白鹿洞书院、岳麓书院、石鼓书院为四大书院，东林书院以讲学议政为宗旨，成为东林党发源地，书院是明代学术与政治的重要阵地。",
            "东林书院": "位于江苏无锡，顾宪成、高攀龙讲学于此，标榜“风声雨声读书声，声声入耳；家事国事天下事，事事关心”，书院成为东林党人议政之所，后被魏忠贤封禁，为明末书院典范。",
            "明朝文字狱": "朱元璋为加强思想控制，大兴文字狱，因一字一句触怒皇帝而获罪者不计其数，如“光”“秃”“贼”等字皆为禁忌，文人动辄得咎，是明代文化专制的体现。",
            "明朝科举三甲": "殿试录取进士分三甲，一甲三名：状元、榜眼、探花，赐进士及第；二甲若干名，赐进士出身；三甲若干名，赐同进士出身，一甲即刻授官，二甲三甲需经朝考方可任职。",
            "状元及第": "大明科举状元为殿试第一，授翰林院修撰，正六品，是文人最高荣誉，明代共出89名状元，商辂为唯一连中三元（解元、会元、状元）者，官至内阁首辅。",
            "明朝国子监": "大明最高学府，设于北京、南京，国子监学生称监生，可直接授官，监生分官生（宗室、勋贵子弟）与民生（科举落第者），国子监是明代培养官员的核心机构。",
            "明朝地方志": "明代修志之风盛行，各省、府、州、县皆修方志，体例完备、内容详实，如《大明一统志》《万历野获编》《涌幢小品》，为研究明代历史的重要文献。",

            // ===== 六、经济民生（141-160）
            "明朝白银货币化": "明朝中后期，海外白银经隆庆开关大量流入，一条鞭法推行计亩征银，白银取代铜钱、宝钞成为主要流通货币，形成银本位制度，沿用至清朝，是中国货币史的重大变革。",
            "大明宝钞": "洪武八年（1375）朱元璋发行的纸币，无准备金、不限发行，后期严重贬值，弘治年间彻底废止，大明宝钞是中国古代最后一种官方纸币，其失败标志着纸币制度的衰落。",
            "明朝手工业": "明代手工业高度发达，景德镇官窑产青花瓷、宣德炉为瓷器巅峰；苏杭丝绸、松江棉布远销海外；佛山冶铁、芜湖浆染、徽州造纸皆为天下闻名，资本主义萌芽在江南出现。",
            "景德镇瓷器": "明代景德镇为瓷都，官窑烧制青花瓷、五彩瓷、斗彩瓷，宣德青花、成化斗彩、万历五彩为明代瓷器三绝，瓷器远销欧洲、东南亚，为大明重要出口商品。",
            "松江棉布": "明代松江府（今上海）为棉纺织中心，松江棉布衣被天下，有“买不尽松江布，收不尽魏塘纱”之说，棉纺织业的繁荣催生了江南最早的资本主义萌芽。",
            "明朝资本主义萌芽": "万历年间，江南苏杭松江的纺织业中，出现机户出资、机工出力的雇佣关系，机户为资本家、机工为雇佣工人，是中国资本主义萌芽的标志，因封建制度束缚未能发展壮大。",
            "明朝商业市镇": "明代江南兴起大批商业市镇，如苏州盛泽镇、嘉兴濮院镇、湖州南浔镇，皆以纺织业闻名，市镇人口数万，商铺林立，是明代商品经济繁荣的象征。",
            "明朝商帮": "明代形成晋商、徽商、浙商、粤商四大商帮，晋商经营盐业、票号，富可敌国；徽商经营茶叶、丝绸、典当，贾而好儒；商帮的崛起是明代商品经济繁荣的重要体现。",
            "晋商": "明代山西商人，以盐业起家，垄断北方盐业贸易，后经营票号、茶叶、丝绸，足迹遍布全国，甚至远至蒙古、俄罗斯，晋商大院至今尚存，为明清商帮之首。",
            "徽商": "明代徽州商人，经营茶叶、丝绸、典当、木材，贾而好儒、诚信经营，徽商子弟多读书科举，官商结合，徽商文化影响深远，徽州牌坊、徽派建筑为其文化代表。",
            "明朝赋税制度": "明初行两税法，分夏税秋粮；中期行一条鞭法，折银缴纳；明末加征三饷（辽饷、剿饷、练饷），赋税繁重，民不聊生，是明末农民起义的直接原因。",
            "三饷加派": "崇祯年间，为应对辽东战事与农民起义，加征辽饷、剿饷、练饷，每年增税超两千万两，百姓不堪重负，纷纷起义，三饷加派是大明灭亡的重要原因之一。",
            "明朝人口": "洪武二十六年（1393）大明人口约6054万，永乐元年（1403）约6659万，万历六年（1578）约6069万，明末因战乱、灾荒人口锐减至约1.2亿（含隐户）。",
            "明朝粮食作物": "明代主要粮食作物为水稻、小麦、粟、黍，永乐年间占城稻在江南推广，亩产大幅提升；万历年间番薯、玉米、马铃薯从美洲传入，在西南、北方推广，缓解粮食危机。",
            "明朝经济作物": "明代经济作物种植广泛，棉花在全国推广，桑树、茶树、甘蔗、烟草为主要经济作物，烟草于万历年间传入，迅速普及，成为重要经济作物。",
            "明朝海外贸易": "隆庆开关后，大明海外贸易空前繁荣，漳州月港为唯一通商口岸，出口瓷器、丝绸、茶叶，进口白银、香料、苏木，年关税超百万两，白银流入量占世界三分之一。",
            "朝贡贸易": "大明官方海外贸易，各国遣使朝贡，大明回赐丰厚，厚往薄来，郑和下西洋为朝贡贸易巅峰，朝贡贸易虽扬国威却耗空国库，后期逐渐衰落。",
            "倭寇之乱": "明代嘉靖年间，日本浪人与中国海盗勾结，侵扰东南沿海，烧杀抢掠，戚继光、俞大猷率军平倭，至隆庆年间倭患肃清，倭乱暴露大明海防废弛之弊。",
            "明朝灾荒": "明末进入小冰期，旱灾、水灾、蝗灾频发，万历至崇祯年间大旱十余次，陕西、河南赤地千里，百姓易子而食，是明末农民起义的根本原因。",
            "明朝粮仓制度": "大明设常平仓、义仓、社仓，丰年储粮、灾年放赈，常平仓由官府管理，义仓、社仓由民间管理，粮仓制度有效缓解灾荒，中后期因吏治腐败逐渐废弛。",

            // ===== 七、对外交流与军事（161-180）
            "万历援朝抗倭": "万历二十年至二十六年（1592-1598），日本丰臣秀吉两次出兵侵朝，大明出兵十余万援朝，血战七年，露梁海战中邓子龙、李舜臣战死，日军败退，此战保全朝鲜，却耗竭大明国力。",
            "郑和下西洋的目的": "郑和七下西洋，核心目的有三：宣扬大明国威、寻找建文帝下落、发展朝贡贸易；次要目的为安抚海外诸国、开辟海上航线、采集海外奇珍，是大明盛世的象征。",
            "郑和船队规模": "郑和每次下西洋率宝船62艘、官兵27000余人，宝船长44丈、宽18丈，为当时世界最大海船，船队配备指南针、航海图，航行技术领先世界百年。",
            "红夷大炮": "明代从荷兰、葡萄牙引进的西洋前膛火炮，炮身长、射程远、威力大，天启年间开始仿制，袁崇焕守宁远时用红夷大炮击毙努尔哈赤，是明末重要军事装备，清军入关后大量仿制。",
            "佛郎机炮": "明代从葡萄牙引进的西洋后膛火炮，炮身短、射速快、轻便灵活，正德年间开始仿制，广泛装备明军，是明代中期主要火炮，用于守城、野战皆佳。",
            "大明水师": "明代水师为世界第一，永乐年间水师有战船3800艘，郑和宝船队为核心，水师镇守海疆、平定倭寇、远航西洋，隆庆开关后水师逐渐衰落，明末郑成功水师为大明最后精锐。",
            "明朝与蒙古关系": "明初朱元璋、朱棣北伐蒙古，将蒙古分为鞑靼、瓦剌、兀良哈三部；正统年间瓦剌犯边致土木堡之变；隆庆年间俺答汗封贡，与蒙古互市，边境和平数十年；明末蒙古林丹汗联明抗清，兵败身死。",
            "俺答封贡": "隆庆五年（1571），明穆宗封蒙古俺答汗为顺义王，开放大同、宣府等十一处互市，蒙古与大明和平通商，边境无战事数十年，史称俺答封贡，为隆庆新政重要成就。",
            "明朝与朝鲜关系": "大明与朝鲜为宗藩关系，朝鲜奉大明为宗主，定期朝贡，大明多次出兵援朝，万历援朝抗倭后，朝鲜对大明忠心耿耿，南明灭亡后仍沿用崇祯年号百年。",
            "明朝与安南关系": "明初安南内乱，大明出兵平定，设交趾布政使司，直接统治安南；宣德年间安南叛乱，大明撤军，安南恢复独立，仍为大明藩属国，朝贡不绝。",
            "明朝与琉球关系": "大明与琉球为宗藩关系，琉球中山王遣使朝贡，大明册封其为王，琉球奉大明正朔，学习中原文化，琉球成为大明在东南海疆的藩屏，贸易往来频繁。",
            "明朝与葡萄牙关系": "正德年间葡萄牙人抵达广东，获准在澳门通商，嘉靖年间葡萄牙人租借澳门，向大明缴纳地租，澳门成为中西交流窗口，葡萄牙传教士利玛窦来华，传播西方科学。",
            "明朝与西班牙关系": "万历年间西班牙人抵达菲律宾，与大明通商，西班牙传教士来华传教，传播西方历法、天文，大明与西班牙在菲律宾有贸易往来，西班牙曾计划远征大明，因无敌舰队覆灭作罢。",
            "明朝与荷兰关系": "万历年间荷兰人抵达福建，占据台湾，与大明通商，崇祯年间郑成功收复台湾，驱逐荷兰殖民者，荷兰与大明贸易往来频繁，荷兰东印度公司是大明主要贸易伙伴之一。",
            "利玛窦": "利玛窦（1552-1610），意大利传教士，万历年间来华，与徐光启合译《几何原本》，传播西方天文、历法、数学，是中西文化交流的先驱，其著作《天主实义》为天主教在华传播的核心文献。",
            "明朝军事著作": "明代军事著作颇丰，戚继光《纪效新书》《练兵实纪》、俞大猷《正气堂集》、茅元仪《武备志》、孙承宗《车营扣答合编》，皆为中国古代兵学瑰宝，总结明代军事经验与战术。",
            "武备志": "茅元仪编撰的军事百科全书，共240卷，收录历代兵书、阵法、兵器、边防、海防，附图738幅，是中国古代规模最大的军事著作，保存大量明代军事资料。",
            "关宁锦防线": "孙承宗、袁崇焕主持修建的辽东防线，从山海关至宁远、锦州，筑坚城、练铁骑、配红夷大炮，是明末抵御后金的核心防线，清军数十年未能攻破，直至松锦大战后陷落。",
            "关宁铁骑": "袁崇焕训练的辽东精锐骑兵，人数仅数万，装备三眼铳、马刀，战斗力极强，多次击败后金八旗军，是明末最精锐的部队，袁崇焕死后铁骑溃散，部分归吴三桂统领。",
            "三眼铳": "明代骑兵用火器，一杆三管，可连发三弹，近战可作锤击，轻便灵活，是关宁铁骑的主要装备，三眼铳威力虽小却射速快，为明代骑兵制式武器。",

            // ===== 八、民俗与其他（181-200）
            "紫禁城建于何时": "紫禁城始建于永乐四年（1406），建成于永乐十八年（1420），为明清两代皇宫，占地72万平方米，有殿宇9000余间，是世界现存最大的木质古建筑群，1987年列入世界文化遗产。",
            "明十三陵": "位于北京昌平天寿山，为大明13位皇帝陵寝，自永乐帝长陵至崇祯帝思陵，除外葬的朱元璋（南京孝陵）、朱允炆（无陵）、朱祁钰（北京景泰陵），皆葬于此，是世界文化遗产。",
            "明孝陵": "明太祖朱元璋与马皇后的陵寝，位于南京紫金山，始建于洪武十四年（1381），建成于永乐三年（1405），是明代皇陵之首，其建筑形制为明清皇陵典范，列入世界文化遗产。",
            "景泰蓝": "明代景泰年间盛行的铜胎掐丝珐琅工艺，以蓝釉为主，色彩艳丽、工艺精湛，景泰蓝为明代宫廷御用工艺品，是中国传统工艺的瑰宝，享誉世界。",
            "宣德炉": "明宣德年间铸造的铜炉，用料考究、工艺精湛，色泽温润、造型典雅，宣德炉为明代宫廷御用香炉，存世极少，为古玩珍品。",
            "明朝后宫制度": "大明后宫设皇后1人，皇贵妃1人，贵妃2人，妃4人，嫔6人，以下为贵人、才人、婕妤等无品级，太祖定祖制“后宫不得干政”，妃嫔多选自民间，无外戚专权之患。",
            "明朝选妃制度": "大明选妃从民间选秀女，无门第限制，经海选、初选、复选、终选，入选者入宫为妃嫔，此举打破门阀垄断，保证后宫清净，是明代后宫制度的一大亮点。",
            "明朝皇子教育": "大明皇子自幼入宗学读书，学习四书五经、帝王之术、兵法谋略，太子设詹事府、东宫官，由大儒讲学，皇子成年后封藩王，不得出封地、不得任官，仅食俸禄。",
            "明朝民间节日": "明代民间节日与今相近，春节贴春联、元宵赏灯、清明扫墓、端午赛龙舟、中秋赏月、重阳登高，春节自正月初一至十五为假期，是民间最盛大的节日，朝廷亦放假庆贺。",
            "明朝服饰": "明代服饰分官服与民服，官服有补子，文官绣禽、武官绣兽，品级分明；民服男子着长衫、短褂，女子着袄裙、褙子，缠足盛行，服饰素雅大方，为中国传统服饰典范。",
            "明朝饮食": "明代饮食丰富，水稻、小麦为主食，番薯、玉米传入后普及，菜肴有鲁菜、川菜、粤菜、苏菜四大菜系，饮茶之风盛行，紫砂壶为泡茶佳品，白酒开始普及，黄酒为主要饮品。",
            "明朝茶文化": "明代废团茶、兴散茶，泡茶之风盛行，紫砂壶成为泡茶神器，宜兴紫砂壶名扬天下，茶文化讲究品茗、赏器、论道，文人雅士皆好饮茶，茶诗、茶画层出不穷。",
            "明朝酒文化": "明代白酒（烧酒）技术成熟，逐渐取代黄酒成为主流饮品，黄酒仍为文人雅士钟爱，葡萄酒、果酒也有饮用，酒肆遍布城乡，饮酒之风盛行，酒令、酒戏为饮酒助兴之法。",
            "明朝科举舞弊": "明代科举舞弊屡禁不止，有夹带、代考、贿赂考官等方式，朝廷严惩舞弊者，夹带者杖责、代考者斩首、考官受贿者凌迟，科举舞弊虽严却屡禁不绝，是明代吏治腐败的体现。",
            "明朝殉葬制度": "明太祖朱元璋恢复殉葬制度，帝后驾崩后妃嫔殉葬，成祖、仁宗、宣宗皆循此制，英宗朱祁镇临终前废除殉葬制度，自此大明无妃嫔殉葬，为英宗一生最大善举。",
            "明朝避讳制度": "明代避讳皇帝名讳，如朱元璋名讳，“元”“璋”皆需避讳，书写时缺笔、改字，如“元”改为“原”，避讳制度严苛，文人撰文需谨慎，否则获罪。",
            "明朝驿站制度": "大明设驿站数千，遍布全国，驿站为官员出行、军情传递提供车马、食宿，驿站由驿丞管理，驿卒世袭，中后期驿站腐败，官员滥用驿站，崇祯年间裁撤驿站，李自成失业起兵。",
            "明朝漕运": "大明漕运为南北物资运输大动脉，运河漕船每年运粮超400万石，漕运总督总领漕务，漕运繁荣催生运河沿岸商业市镇，如扬州、淮安、临清，是明代经济的生命线。",
            "明朝海运": "明初海运发达，郑和下西洋为海运巅峰，后期因倭寇之乱禁海，隆庆开关后海运复苏，漳州月港为海运中心，海运贸易为大明带来巨额白银，是明代经济的重要支柱。",
            "明朝灭亡的原因": "大明灭亡非一朝一夕之故，核心原因有六：朝政腐败党争不断、土地兼并民不聊生、赋税繁重三饷加派、边患严重后金崛起、天灾频发小冰期肆虐、崇祯刚愎错杀良将，内忧外患之下，大明终至覆灭。"
        };

        // ========== 历史对话核心功能 ==========
        // 1. 读取历史对话
        function getHistory() {
            const history = localStorage.getItem(HISTORY_KEY);
            return history ? JSON.parse(history) : [];
        }
        // 2. 保存历史对话
        function saveHistory(question) {
            const history = getHistory();
            const now = new Date().toLocaleString('zh-CN');
            // 去重：如果已有相同问题则删除旧的，新增到顶部
            const newHistory = history.filter(item => item.question !== question);
            newHistory.unshift({ question, time: now });
            // 最多保存20条历史，防止过多
            localStorage.setItem(HISTORY_KEY, JSON.stringify(newHistory.slice(0,20)));
            renderHistory();
        }
        // 3. 渲染历史对话列表
        function renderHistory() {
            const history = getHistory();
            historyList.innerHTML = history.length 
                ? history.map(item => `
                    <li class="history-item" data-question="${item.question}">
                        ${item.question}
                        <span class="history-time">${item.time}</span>
                    </li>
                `).join('')
                : '<li style="text-align:center;color:var(--text-secondary)">暂无对话卷宗</li>';
        }
        // 4. 清空历史对话
        function clearHistory() {
            localStorage.removeItem(HISTORY_KEY);
            renderHistory();
        }
        // 5. 点击历史问题重新发送
        historyList.addEventListener('click', (e) => {
            const item = e.target.closest('.history-item');
            if(item) {
                const question = item.dataset.question;
                messageInput.value = question;
                sendMessage(false);
                historyPanel.classList.remove('show');
            }
        })

        // 初始化主题
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            themeToggle.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        }

        // 切换主题
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeToggle.innerHTML = newTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        // 切换历史面板显示/隐藏
        historyToggle.addEventListener('click', () => {
            historyPanel.classList.toggle('show');
        });
        // 绑定清空历史按钮
        clearHistoryBtn.addEventListener('click', clearHistory);

        // 添加消息到聊天窗口
        function addMessage(content, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${isUser ? 'user-message' : 'ai-message'}`;
            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            messageDiv.innerHTML = `
                <div class="message-content">${content}</div>
                <div class="message-time">
                    <i class="fas fa-clock"></i> ${time}
                </div>
            `;
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // 获取AI回答
        function getAIAnswer(question, deepThink = false) {
            const cleanQuestion = question.trim().replace(/[？?。，,！!]/g, '');
            let answer = answerLibrary[cleanQuestion];
            if (!answer) {
                answer = deepThink 
                    ? `容吾三思...\n\n关于「${question}」此问，本朝典籍中未有详载。大明疆域万里，典章浩如烟海，若客官欲深究，可详叙所问，吾当遍查文渊阁藏书，务求详实。`
                    : `关于「${question}」，吾略知一二：大明立国近三百年，相关史事繁杂，若客官能稍作细化，吾当尽心解答。`;
            } else if (deepThink) {
                answer = `臣谨按：\n\n${answer}\n\n以上乃据《明实录》《明史》《明会典》等官修典籍所载，确然可考。`;
            }
            return answer;
        }

        // 发送消息【优化：加入历史保存】
        function sendMessage(deepThink = false) {
            const message = messageInput.value.trim();
            if (!message) return;
            // 添加用户消息
            addMessage(message, true);
            // 保存到历史对话
            saveHistory(message);
            messageInput.value = '';
            
            // 显示思考中
            const thinkingDiv = document.createElement('div');
            thinkingDiv.className = 'chat-message ai-message';
            thinkingDiv.innerHTML = `
                <div class="message-content thinking">
                    <span class="thinking-dot"></span>
                    <span class="thinking-dot"></span>
                    <span class="thinking-dot"></span>
                    <span> 文渊阁侍读正在${deepThink ? '深思' : '查阅'}典籍...</span>
                </div>
            `;
            chatContainer.appendChild(thinkingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // 模拟思考延迟
            const delay = deepThink ? 3000 : 1500;
            setTimeout(() => {
                thinkingDiv.remove();
                const answer = getAIAnswer(message, deepThink);
                addMessage(answer);
            }, delay);
        }

        // 绑定发送按钮事件
        sendBtn.addEventListener('click', () => sendMessage(false));
        thinkBtn.addEventListener('click', () => sendMessage(true));
        messageInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage(false);
            }
        });

        // 初始化：主题+历史记录
        initTheme();
        renderHistory();
    </script>
</body>
</html>
